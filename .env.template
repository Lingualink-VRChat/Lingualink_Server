# =============================================================================
# Lingualink Server 配置文件模板
# 复制此文件为 .env 并根据需要修改配置
# =============================================================================

# 服务器配置
# -----------------------------------------------------------------------------
HOST=0.0.0.0
PORT=5000
DEBUG=false

# LLM 服务配置 (必须配置)
# -----------------------------------------------------------------------------
# vLLM 服务器地址 - 请修改为你的实际地址
VLLM_SERVER_URL=http://192.168.8.6:8000

# 模型名称 - 请修改为你的实际模型名
MODEL_NAME=qwenOmni7

# LLM API 密钥 - 请修改为你的实际密钥
API_KEY=abc123

# 文件上传配置
# -----------------------------------------------------------------------------
# 最大上传文件大小 (字节，32MB以支持更大音频文件)
MAX_UPLOAD_SIZE=33554432

# 允许的文件扩展名
ALLOWED_EXTENSIONS=["wav", "opus", "mp3", "flac", "m4a", "aac", "ogg"]

# 音频转换性能配置 (新增)
# -----------------------------------------------------------------------------
# 最大同时进行的音频转换数量 (建议: CPU核心数 * 2)
# 对于50并发用户建议设置为16-20
MAX_CONCURRENT_AUDIO_CONVERSIONS=16

# 音频转换器线程池大小 (建议: CPU核心数)
# 根据你的服务器CPU核心数调整，8核心建议设置为8
AUDIO_CONVERTER_WORKERS=8

# 鉴权配置
# -----------------------------------------------------------------------------
# 是否启用鉴权
AUTH_ENABLED=true

# 应用内部加密密钥 (非常重要！请生成强密钥)
SECRET_KEY=your-secret-key-change-this

# 访问令牌过期时间 (分钟)
ACCESS_TOKEN_EXPIRE_MINUTES=30

# Redis缓存配置
# -----------------------------------------------------------------------------
# 是否启用Redis缓存 (提升API密钥验证性能)
REDIS_ENABLED=True

# Redis连接URL
# 格式: redis://[:password@]host[:port][/database]
# 无密码: redis://localhost:6379/0
# 有密码: redis://:password@localhost:6379/0
REDIS_URL=redis://:redis_5Rc6hK@localhost:6379/0

# API密钥缓存过期时间 (秒，默认5分钟)
API_KEY_CACHE_TTL=300

# 数据库配置
# -----------------------------------------------------------------------------
# API密钥数据库路径
DATABASE_PATH=data/api_keys.db

# 默认语言配置
# -----------------------------------------------------------------------------
# 默认目标语言
DEFAULT_TARGET_LANGUAGES=["英文", "日文"]

# 默认用户查询
DEFAULT_USER_QUERY=请处理下面的音频。

# =============================================================================
# 重要说明:
#
# 1. 生成第一个API密钥:
#    python3 manage_api_keys.py --local generate --name "admin-key"
#
# 2. 性能调优建议:
#    - MAX_CONCURRENT_AUDIO_CONVERSIONS: 设置为 CPU核心数 * 2
#    - AUDIO_CONVERTER_WORKERS: 设置为 CPU核心数
#    - 对于50并发用户，建议至少16核心的服务器
#
# 3. 系统要求:
#    - 确保已安装 FFmpeg 和 OPUS 支持
#    - 运行: ./scripts/install_audio_deps.sh
#
# 4. 监控端点:
#    - 性能监控: GET /api/v1/performance
#    - 并发状态: GET /api/v1/concurrent-status
# ============================================================================= 